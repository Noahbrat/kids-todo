<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Morning Todo List</title>

    <!-- iOS Web App Meta Tags -->
    <meta name="apple-mobile-web-app-title" content="Morning Todo">
    <link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDE4MCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxkZWZzPgo8cmFkaWFsR3JhZGllbnQgaWQ9InN1bnNldCIgY3g9IjUwJSIgY3k9IjcwJSIgcj0iNjAlIj4KPHN0b3Agb2Zmc2V0PSIwJSIgc3R5bGU9InN0b3AtY29sb3I6I0ZGRjNBMCIvPgo8c3RvcCBvZmZzZXQ9IjUwJSIgc3R5bGU9InN0b3AtY29sb3I6I0ZGQzY1NyIvPgo8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRjhBODAiLz4KPC9yYWRpYWxHcmFkaWVudD4KPC9kZWZzPgo8cGF0aCBkPSJNMCAwSDE4MFYxODBIMFoiIGZpbGw9InVybCgjc3Vuc2V0KSIvPgo8Y2lyY2xlIGN4PSI5MCIgY3k9IjEyMCIgcj0iMzUiIGZpbGw9IiNGRkY3Q0QiIHN0cm9rZT0iI0ZGRUMwMCIgc3Ryb2tlLXdpZHRoPSIzIi8+CjwhLS0gU3VuIHJheXMgLS0+CjxwYXRoIGQ9Ik05MCA2MEw5MCA0NSIgc3Ryb2tlPSIjRkZFQzAwIiBzdHJva2Utd2lkdGg9IjQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgo8cGF0aCBkPSJNMTI1IDc3TDEzNSA2NyIgc3Ryb2tlPSIjRkZFQzAwIiBzdHJva2Utd2lkdGg9IjQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgo8cGF0aCBkPSJNMTQyIDEyMEwxNTcgMTIwIiBzdHJva2U9IiNGRkVDMDAiIHN0cm9rZS13aWR0aD0iNCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+CjxwYXRoIGQ9Ik01NSA3N0w0NSA2NyIgc3Ryb2tlPSIjRkZFQzAwIiBzdHJva2Utd2lkdGg9IjQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgo8cGF0aCBkPSJNMzggMTIwTDIzIDEyMCIgc3Ryb2tlPSIjRkZFQzAwIiBzdHJva2Utd2lkdGg9IjQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgo8IS0tIENoZWNrbWFyayAtLT4KPHBhdGggZD0iTTcwIDEzNUw4MiAxNDdMTEwIDExOSIgc3Ryb2tlPSIjNENBRjUwIiBzdHJva2Utd2lkdGg9IjYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZmlsbD0ibm9uZSIvPgo8L3N2Zz4K">
    <link rel="icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGRlZnM+CjxyYWRpYWxHcmFkaWVudCBpZD0ic3Vuc2V0MzIiIGN4PSI1MCUiIGN5PSI3MCUiIHI9IjYwJSI+CjxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRkYzQTAiLz4KPHN0b3Agb2Zmc2V0PSI1MCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRkM2NTciLz4KPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdHlsZT0ic3RvcC1jb2xvcjojRkY4QTgwIi8+CjwvcmFkaWFsR3JhZGllbnQ+CjwvZGVmcz4KPHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiBmaWxsPSJ1cmwoI3N1bnNldDMyKSIgcng9IjQiLz4KPGNpcmNsZSBjeD0iMTYiIGN5PSIyMCIgcj0iNiIgZmlsbD0iI0ZGRjdDRCIgc3Ryb2tlPSIjRkZFQzAwIiBzdHJva2Utd2lkdGg9IjEiLz4KPHBhdGggZD0iTTE2IDEyTDE2IDEwIiBzdHJva2U9IiNGRkVDMDAiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+CjxwYXRoIGQ9Ik0yMiAxNkwyNCAxNiIgc3Ryb2tlPSIjRkZFQzAwIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgo8cGF0aCBkPSJNMTAgMTZMOCAxNiIgc3Ryb2tlPSIjRkZFQzAwIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgo8cGF0aCBkPSJNMTIgMjRMMTUgMjEiIHN0cm9rZT0iIzRDQUY1MCIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGZpbGw9Im5vbmUiLz4KPC9zdmc+Cg==">
    <!-- Load optional config file (families will create this after forking) -->
    <script>
        // Try to load config file - if it doesn't exist, we'll use fallback values
        window.APP_CONFIG = window.APP_CONFIG || {};
    </script>
    <script src="config.js" onerror="console.log('No config.js found - using fallback configuration')"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<div class="container">
    <div class="header">
        <span style="font-size: 2.5em;">🌅</span>
        <h1>Morning Todo List</h1>
        <button class="sync-btn" id="syncBtn" onclick="syncFromCloud()" title="Sync from cloud">
            <span class="sync-icon">☁️🔄</span>
        </button>
    </div>

    <div class="mode-buttons">
        <button class="mode-btn todo-mode" id="todoModeBtn">Todo Mode</button>
        <button class="mode-btn inactive" id="editModeBtn">Edit Mode</button>
    </div>

<table class="tasks-table" id="tasksTable">
        <thead>
            <tr>
                <th id="dayHeader"></th>
                <!-- Child headers will be dynamically created by updateTableStructure() -->
            </tr>
        </thead>
        <tbody id="tasksList">
        </tbody>
    </table>

    <div class="reset-button-container hidden" id="resetButtonContainer">
        <button class="reset-btn" onclick="resetAllTasks()">Reset All Tasks</button>
    </div>

    <div class="add-task-form hidden" id="addTaskForm">
        <input type="text" class="add-task-input" id="newTaskInput" placeholder="Enter new task...">
        <button class="add-task-btn" onclick="addTask()">Add Task</button>
    </div>

    <div class="message-area" id="messageArea">
        <div class="message-header">
            <span>💝</span>
            <span>Message from Mom</span>
        </div>
        <textarea
            class="message-textarea hidden"
            id="messageTextarea"
            placeholder="Write a loving message, reminder, or encouragement for your kids... ❤️"
            oninput="updateMessage(); debouncedSave();"
            onblur="clearTimeout(saveTimeout); updateMessage(); saveMessageToHistory(); saveToCloud();"
        ></textarea>
        <div class="message-display" id="messageDisplay"></div>

        <!-- Message History (only visible in Edit Mode) -->
        <div class="message-history hidden" id="messageHistory">
            <div class="message-history-header">
                <span>📝</span>
                <span>Previous Messages</span>
                <span class="history-count" id="historyCount"></span>
            </div>
            <div class="message-history-list" id="messageHistoryList">
                <!-- History items will be populated by JavaScript -->
            </div>
        </div>
    </div>
</div>

<!-- Celebration Overlay -->
<div class="celebration-overlay" id="celebrationOverlay"></div>

<!-- Setup Wizard Overlay -->
<div class="setup-overlay" id="setupOverlay">
    <div class="setup-wizard">
        <h2>👨‍👩‍👧‍👦 Welcome to Your Family Todo App!</h2>
        <p>Let's set up your children's names to get started. You can add, remove, or edit these names.</p>
        
        <div class="children-setup" id="childrenSetup">
            <!-- Children input fields will be added here by JavaScript -->
        </div>
        
        <button class="add-child-btn" id="addChildBtn" onclick="addChildInput()">+ Add Another Child</button>
        
        <div class="setup-error hidden" id="setupError">
            Please enter at least one child's name.
        </div>
        
        <div class="setup-buttons">
            <button class="setup-btn setup-btn-secondary" onclick="skipSetup()">Use Default Names</button>
            <button class="setup-btn setup-btn-primary" onclick="completeSetup()">Save & Continue</button>
        </div>
    </div>
</div>

<script src="script.js"></script>
</body>
</html>
